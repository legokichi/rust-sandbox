<html>
{% if let Some(user) = user %}

<head>
    <title>Welcome</title>
</head>

<body>
    <p>
        id: {{user.id}}
    </p>
    {% if let Some(github_id) = user.github_id %}
    <p>
        github: {{ github_id }}
    </p>
    {% else %}
    <form method="post" action="/login">
        <input type="submit" value="GitHub Login" />
        <input type="hidden" name="provider" value="github" />
    </form>
    {% endif %}
    {% if let Some(facebook_id) = user.facebook_id %}
    <p>
        facebook: {{ facebook_id }}
    </p>
    {% else %}
    <form method="post" action="/login">
        <input type="submit" value="Facebook Login" />
        <input type="hidden" name="provider" value="facebook" />
    </form>
    {% endif %}
    <form method="post" action="/logout">
        <input type="submit" value="logout" />
    </form>
</body>

{% else %}

<head>
    <title>OAuth2 Login</title>
</head>

<body>
    <form method="post" action="/login">
        <input type="submit" value="Local Login" />
        <input type="hidden" name="provider" value="local" />
    </form>

    <form method="post" action="/login">
        <input type="submit" value="GitHub Login" />
        <input type="hidden" name="provider" value="github" />
    </form>
    <form method="post" action="/login">
        <input type="submit" value="Facebook Login" />
        <input type="hidden" name="provider" value="facebook" />
    </form>
</body>

{% endif %}

</html>
